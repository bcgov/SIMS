{
  "title": "Student Exceptions",
  "name": "studentExceptions",
  "path": "studentexceptions",
  "type": "form",
  "display": "form",
  "tags": [
    "common"
  ],
  "components": [
    {
      "label": "HTML",
      "className": "mb-4",
      "attrs": [
        {
          "attr": "",
          "value": ""
        }
      ],
      "content": "<span class=\"category-header-large primary-color mr-2\" role=\"heading\" aria-level=\"2\">Student exception requests</span> \n<span class=\"fa fa-circle formio-status-chip {{ data.exceptionStatusClass }} mt-2\">\n  {{ data.exceptionStatusOnLoad }}\n</span>",
      "refreshOnChange": true,
      "key": "html4",
      "type": "htmlelement",
      "input": false,
      "tableView": false
    },
    {
      "label": "HTML",
      "tag": "p",
      "attrs": [
        {
          "attr": "",
          "value": ""
        }
      ],
      "content": "View the exception request and any supporting documentation on the student application. When the review is complete, come back to this page to approve or deny the request.",
      "refreshOnChange": false,
      "key": "html2",
      "type": "htmlelement",
      "input": false,
      "tableView": false
    },
    {
      "title": "Requests",
      "collapsible": false,
      "hideLabel": true,
      "key": "panel1",
      "type": "panel",
      "label": "Panel",
      "input": false,
      "tableView": false,
      "components": [
        {
          "label": "HTML",
          "tag": "h3",
          "className": "category-header-medium primary-color",
          "attrs": [
            {
              "attr": "",
              "value": ""
            }
          ],
          "content": "Requests to be Assesed ({{ data.requestedForApproval.length }})",
          "refreshOnChange": true,
          "customClass": "category-header-medium primary-color",
          "key": "html3",
          "type": "htmlelement",
          "input": false,
          "tableView": false
        },
        {
          "label": "Requests to be approved",
          "disableAddingRemovingRows": true,
          "reorder": false,
          "addAnotherPosition": "bottom",
          "layoutFixed": false,
          "enableRowGroups": false,
          "initEmpty": false,
          "customClass": "borderless-datagrid",
          "hideLabel": true,
          "tableView": false,
          "defaultValue": [
            {}
          ],
          "persistent": false,
          "redrawOn": "data",
          "validateWhenHidden": false,
          "key": "requestedForApproval",
          "type": "datagrid",
          "input": true,
          "components": [
            {
              "input": false,
              "key": "well",
              "tableView": false,
              "label": "",
              "type": "well",
              "components": [
                {
                  "label": "Exception description",
                  "tag": "strong",
                  "attrs": [
                    {
                      "attr": "",
                      "value": ""
                    }
                  ],
                  "content": "{{ row }}",
                  "refreshOnChange": false,
                  "key": "html",
                  "type": "htmlelement",
                  "input": false,
                  "tableView": false
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "title": "Previously Approved Exceptions",
      "collapsible": false,
      "hideLabel": true,
      "key": "panel",
      "type": "panel",
      "label": "Panel",
      "input": false,
      "tableView": false,
      "components": [
        {
          "label": "Previously Approved Exceptions",
          "tag": "h3",
          "className": "category-header-medium primary-color",
          "attrs": [
            {
              "attr": "",
              "value": ""
            }
          ],
          "content": "Previously Approved Requests ({{ data.previouslyApprovedRequests.length }})",
          "refreshOnChange": false,
          "key": "html6",
          "type": "htmlelement",
          "input": false,
          "tableView": false
        },
        {
          "label": "Previously approved exceptions",
          "disableAddingRemovingRows": true,
          "reorder": false,
          "addAnotherPosition": "bottom",
          "layoutFixed": false,
          "enableRowGroups": false,
          "initEmpty": false,
          "customClass": "borderless-datagrid",
          "hideLabel": true,
          "tableView": false,
          "defaultValue": [
            {}
          ],
          "persistent": false,
          "redrawOn": "data",
          "validateWhenHidden": false,
          "key": "previouslyApprovedRequests",
          "type": "datagrid",
          "input": true,
          "components": [
            {
              "input": false,
              "key": "well",
              "tableView": false,
              "label": "",
              "type": "well",
              "components": [
                {
                  "label": "Exception description",
                  "tag": "strong",
                  "attrs": [
                    {
                      "attr": "",
                      "value": ""
                    }
                  ],
                  "content": "{{ row }}",
                  "refreshOnChange": false,
                  "key": "html",
                  "type": "htmlelement",
                  "input": false,
                  "tableView": false
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "title": "Staff Approval",
      "collapsible": false,
      "hideLabel": true,
      "key": "staffApproval",
      "conditional": {
        "show": "true",
        "when": "showStaffApproval",
        "eq": "true"
      },
      "logic": [
        {
          "name": "Disable staff area approval",
          "trigger": {
            "type": "javascript",
            "javascript": "result = data.exceptionStatusOnLoad !== \"Pending\";"
          },
          "actions": [
            {
              "name": "Disable staff area",
              "type": "property",
              "property": {
                "label": "Disabled",
                "value": "disabled",
                "type": "boolean"
              },
              "state": true
            }
          ]
        }
      ],
      "type": "panel",
      "label": "Panel",
      "input": false,
      "tableView": false,
      "components": [
        {
          "label": "Decision",
          "tag": "h3",
          "className": "category-header-medium primary-color",
          "attrs": [
            {
              "attr": "",
              "value": ""
            }
          ],
          "content": "Decision",
          "refreshOnChange": false,
          "key": "html",
          "type": "htmlelement",
          "input": false,
          "tableView": false
        },
        {
          "label": "Approve for assessment?",
          "optionsLabelPosition": "right",
          "inline": false,
          "tableView": false,
          "values": [
            {
              "label": "Yes",
              "value": "Approved",
              "shortcut": ""
            },
            {
              "label": "No",
              "value": "Declined",
              "shortcut": ""
            }
          ],
          "validate": {
            "required": true,
            "onlyAvailableItems": true
          },
          "key": "exceptionStatus",
          "type": "radio",
          "input": true
        },
        {
          "label": "Notes",
          "autoExpand": false,
          "showCharCount": true,
          "tableView": true,
          "validate": {
            "required": true,
            "maxLength": 1000
          },
          "key": "noteDescription",
          "type": "textarea",
          "input": true
        },
        {
          "label": "HTML",
          "attrs": [
            {
              "attr": "",
              "value": ""
            }
          ],
          "content": "<strong>Approved by: </strong>{{ data.assessedByUserName }} | <strong>Approved on: </strong>{{ data.assessedDate }}",
          "refreshOnChange": true,
          "key": "html1",
          "customConditional": "show = data.exceptionStatusOnLoad === \"Approved\";",
          "type": "htmlelement",
          "input": false,
          "tableView": false,
          "tag": "p"
        },
        {
          "label": "HTML",
          "attrs": [
            {
              "attr": "",
              "value": ""
            }
          ],
          "content": "<strong>Declined by: </strong>{{ data.assessedByUserName }} | <strong>Declined on: </strong>{{ data.assessedDate }}",
          "refreshOnChange": true,
          "key": "html5",
          "customConditional": "show = data.exceptionStatusOnLoad === \"Declined\";",
          "type": "htmlelement",
          "input": false,
          "tableView": false,
          "tag": "p"
        }
      ]
    },
    {
      "input": true,
      "tableView": true,
      "key": "showStaffApproval",
      "label": "showStaffApproval",
      "type": "hidden",
      "customDefaultValue": "value = true"
    }
  ]
}