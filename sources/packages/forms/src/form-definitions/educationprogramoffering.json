{
  "title": "Education Program Offering",
  "name": "educationprogramoffering",
  "path": "educationprogramoffering",
  "type": "form",
  "display": "form",
  "tags": [
    "common"
  ],
  "components": [
    {
      "label": "HTML",
      "tag": "h2",
      "className": "category-header-large primary-color",
      "attrs": [
        {
          "attr": "",
          "value": ""
        }
      ],
      "content": "Study period",
      "refreshOnChange": false,
      "key": "html",
      "customConditional": "show = !!!(data.offeringChipStatus)",
      "type": "htmlelement",
      "input": false,
      "tableView": false
    },
    {
      "label": "HTML",
      "tag": "p",
      "attrs": [
        {
          "attr": "",
          "value": ""
        }
      ],
      "content": "<span class=\"mb-2\">Study period</span> <span class=\"fa fa-circle formio-status-chip ml-1 mt-1 {{ data.offeringChipStatus }}\">{{ data.offeringStatus }}</span>",
      "refreshOnChange": true,
      "customClass": "category-header-large primary-color",
      "key": "html13",
      "customConditional": "show = !!(data.offeringChipStatus)",
      "type": "htmlelement",
      "input": false,
      "tableView": false
    },
    {
      "label": "HTML",
      "tag": "p",
      "attrs": [
        {
          "attr": "",
          "value": ""
        }
      ],
      "content": "Students will see the program name, description, and credential type including your study period name, dates, and year of program.",
      "refreshOnChange": false,
      "customClass": "mt-n2",
      "key": "html6",
      "type": "htmlelement",
      "input": false,
      "tableView": false
    },
    {
      "collapsible": false,
      "hideLabel": true,
      "key": "panel4",
      "logic": [
        {
          "name": "Disable for non Institution clients and offerings in non editable status",
          "trigger": {
            "type": "javascript",
            "javascript": "/**\r\n * The given logic is added to the panel of the form to display the\r\n * form as read-only for ministry(AEST) user and also allow the hidden component values\r\n * to be calculated.\r\n * If a form.io is loaded with readOnly attribute set to true, then the restricts\r\n * hidden components to calculate it's value by design.\r\n * Offerings which are not in Approved,Pending or Declined status\r\n * must not be editable.\r\n*/\r\nresult = data.mode === \"readonly\";"
          },
          "actions": [
            {
              "name": "Disable form",
              "type": "property",
              "property": {
                "label": "Disabled",
                "value": "disabled",
                "type": "boolean"
              },
              "state": true
            }
          ]
        }
      ],
      "type": "panel",
      "label": "Panel",
      "input": false,
      "tableView": false,
      "components": [
        {
          "label": "Name",
          "placeholder": "Name (e.g. 2022 Fall semester, Term 1, Cohort A)",
          "tableView": true,
          "validate": {
            "required": true,
            "maxLength": 100
          },
          "key": "offeringName",
          "attributes": {
            "data-cy": "offeringName"
          },
          "type": "textfield",
          "input": true,
          "description": "Please include the institution location and cohort details directly into the name of the offering so that students can differentiate it from other similar offerings."
        },
        {
          "customClass": "formio-panel-unset",
          "collapsible": false,
          "hideLabel": true,
          "key": "panel",
          "logic": [
            {
              "name": "Enable offering inputs if no application is linked",
              "trigger": {
                "type": "javascript",
                "javascript": "/**\n * If there are no applications linked\n * then enable all the inputs that affect the application assessment.\n * \n * This action is done only for institution users\n * and offering in status Approved or Pending or Declined.\n*/\nresult = data.mode === \"assessment-data-readonly\";"
              },
              "actions": [
                {
                  "name": "Disable form",
                  "type": "property",
                  "property": {
                    "label": "Disabled",
                    "value": "disabled",
                    "type": "boolean"
                  },
                  "state": true
                }
              ]
            }
          ],
          "type": "panel",
          "label": "Panel",
          "input": false,
          "tableView": false,
          "components": [
            {
              "label": "Year of study",
              "widget": "html5",
              "tableView": true,
              "data": {
                "values": [
                  {
                    "label": "Year 1",
                    "value": "1"
                  },
                  {
                    "label": "Year 2",
                    "value": "2"
                  },
                  {
                    "label": "Year 3",
                    "value": "3"
                  },
                  {
                    "label": "Year 4",
                    "value": "4"
                  },
                  {
                    "label": "Year 5",
                    "value": "5"
                  },
                  {
                    "label": "Year 6",
                    "value": "6"
                  },
                  {
                    "label": "Year 7",
                    "value": "7"
                  },
                  {
                    "label": "Year 8",
                    "value": "8"
                  },
                  {
                    "label": "Year 9",
                    "value": "9"
                  }
                ]
              },
              "validate": {
                "required": true,
                "onlyAvailableItems": true
              },
              "key": "yearOfStudy",
              "attributes": {
                "data-cy": "yearOfStudy"
              },
              "type": "select",
              "input": true,
              "searchThreshold": 0.3
            },
            {
              "label": "HTML",
              "tag": "p",
              "className": "alert alert-info fa fa-info-circle w-100",
              "attrs": [
                {
                  "attr": "",
                  "value": ""
                }
              ],
              "content": "<strong class=\"ml-2\"> The Year of Study will be displayed as part of the offering name. Here's an example of what students will see.</strong>\n<br>e.g. 2022 Winter co-op (Jan 15 2022 - Mar 20 2022) - Year 1",
              "refreshOnChange": false,
              "customClass": "banner-info",
              "key": "html7",
              "type": "htmlelement",
              "input": false,
              "tableView": false
            },
            {
              "label": "How will this be offered?",
              "optionsLabelPosition": "right",
              "inline": false,
              "tableView": false,
              "values": [
                {
                  "label": "Part time",
                  "value": "Part Time",
                  "shortcut": ""
                },
                {
                  "label": "Full time",
                  "value": "Full Time",
                  "shortcut": ""
                }
              ],
              "validate": {
                "required": true,
                "onlyAvailableItems": true
              },
              "key": "offeringIntensity",
              "tags": [
                "execute-validation"
              ],
              "attributes": {
                "data-cy": "offeringIntensity"
              },
              "type": "radio",
              "input": true,
              "lockKey": true
            },
            {
              "label": "Study period intensity popup",
              "className": "alert alert-warning fa fa-exclamation-triangle w-100",
              "attrs": [
                {
                  "attr": "",
                  "value": ""
                }
              ],
              "content": "<strong class=\"ml-2\">The study period intensity is dependent on the program intensity</strong>\n<br>\n<span>Your program must have the correct program intensity to be able to select the offering intensity here.</span>",
              "refreshOnChange": true,
              "customClass": "banner-warning",
              "hidden": true,
              "key": "programOfferingIntensityMismatch",
              "customConditional": "show = data.validationWarnings.indexOf(component.key) !== -1;",
              "type": "htmlelement",
              "input": false,
              "tableView": false
            },
            {
              "title": "Course Load Panel",
              "collapsible": false,
              "hideLabel": true,
              "key": "courseLoadPanel",
              "conditional": {
                "show": true,
                "when": "offeringIntensity",
                "eq": "Part Time"
              },
              "type": "panel",
              "label": "Panel",
              "input": false,
              "tableView": false,
              "components": [
                {
                  "label": "What is the course load for this offering?",
                  "mask": false,
                  "tableView": false,
                  "delimiter": false,
                  "requireDecimal": false,
                  "inputFormat": "plain",
                  "truncateMultipleSpaces": false,
                  "validate": {
                    "required": true,
                    "min": 20,
                    "max": 59,
                    "customMessage": "Course load must be between 20 and 59"
                  },
                  "key": "courseLoad",
                  "type": "number",
                  "input": true,
                  "inputType": "number"
                }
              ]
            },
            {
              "label": "How will this offering be delivered?",
              "optionsLabelPosition": "right",
              "inline": false,
              "tableView": false,
              "values": [
                {
                  "label": "Onsite",
                  "value": "onsite",
                  "shortcut": ""
                },
                {
                  "label": "Online",
                  "value": "online",
                  "shortcut": ""
                },
                {
                  "label": "Blended",
                  "value": "blended",
                  "shortcut": ""
                }
              ],
              "validate": {
                "required": true,
                "onlyAvailableItems": true
              },
              "key": "offeringDelivered",
              "tags": [
                "execute-validation"
              ],
              "attributes": {
                "data-cy": "offeringDelivered"
              },
              "type": "radio",
              "input": true,
              "hideOnChildrenHidden": false,
              "lockKey": true
            },
            {
              "label": "HTML",
              "tag": "p",
              "className": "alert alert-warning fa fa-exclamation-triangle w-100",
              "attrs": [
                {
                  "attr": "",
                  "value": ""
                }
              ],
              "content": "<strong class=\"ml-2\">The study period delivery is dependent on the program delivery</strong>\n<br>\n<span>Your program must have the correct delivery method(s) to be able to select the offering delivery here.</span>",
              "refreshOnChange": true,
              "customClass": "banner-warning",
              "key": "programOfferingDeliveryMismatch",
              "customConditional": "show = data.validationWarnings.indexOf(component.key) !== -1;",
              "type": "htmlelement",
              "input": false,
              "tableView": false
            },
            {
              "key": "panelPanel",
              "input": false,
              "title": "Online delivery instructions panel",
              "tableView": false,
              "components": [
                {
                  "input": true,
                  "tableView": true,
                  "label": "Please indicate the option that best describes this offering's mode(s) of online instruction.",
                  "key": "onlineInstructionMode",
                  "logic": [
                    {
                      "name": "Mandatory for BC Private",
                      "trigger": {
                        "type": "simple",
                        "simple": {
                          "show": true,
                          "when": "isBCPrivate",
                          "eq": "true"
                        }
                      },
                      "actions": [
                        {
                          "name": "Set Mandatory",
                          "type": "property",
                          "property": {
                            "label": "Required",
                            "value": "validate.required",
                            "type": "boolean"
                          },
                          "state": true
                        }
                      ]
                    }
                  ],
                  "values": [
                    {
                      "value": "synchronousOnly",
                      "label": "Synchronous only",
                      "shortcut": ""
                    },
                    {
                      "value": "asynchronousOnly",
                      "label": "Asynchronous only",
                      "shortcut": ""
                    },
                    {
                      "value": "synchronousAndAsynchronous",
                      "label": "Synchronous and Asynchronous",
                      "shortcut": ""
                    }
                  ],
                  "type": "radio",
                  "optionsLabelPosition": "right",
                  "lockKey": true
                },
                {
                  "input": true,
                  "tableView": true,
                  "label": "Will this offering always be provided with the same total duration of online delivery?",
                  "key": "isOnlineDurationSameAlways",
                  "logic": [
                    {
                      "name": "Mandatory for BC Private",
                      "trigger": {
                        "type": "simple",
                        "simple": {
                          "show": true,
                          "when": "isBCPrivate",
                          "eq": "true"
                        }
                      },
                      "actions": [
                        {
                          "name": "Set Mandatory",
                          "type": "property",
                          "property": {
                            "label": "Required",
                            "value": "validate.required",
                            "type": "boolean"
                          },
                          "state": true
                        }
                      ]
                    }
                  ],
                  "values": [
                    {
                      "value": "yes",
                      "label": "Yes",
                      "shortcut": ""
                    },
                    {
                      "value": "no",
                      "label": "No",
                      "shortcut": ""
                    }
                  ],
                  "type": "radio",
                  "optionsLabelPosition": "right",
                  "conditional": {
                    "show": "true",
                    "when": "offeringDelivered",
                    "eq": "blended"
                  },
                  "lockKey": true
                },
                {
                  "input": true,
                  "tableView": true,
                  "inputType": "number",
                  "label": "What percentage of this blended offering total duration will be provided by online delivery?",
                  "key": "totalOnlineDuration",
                  "logic": [
                    {
                      "name": "Mandatory for BC Private",
                      "trigger": {
                        "type": "simple",
                        "simple": {
                          "show": true,
                          "when": "isBCPrivate",
                          "eq": "true"
                        }
                      },
                      "actions": [
                        {
                          "name": "Set Mandatory",
                          "type": "property",
                          "property": {
                            "label": "Required",
                            "value": "validate.required",
                            "type": "boolean"
                          },
                          "state": true
                        }
                      ]
                    }
                  ],
                  "validate": {
                    "min": 1,
                    "max": 99
                  },
                  "type": "number",
                  "conditional": {
                    "show": "true",
                    "when": "isOnlineDurationSameAlways",
                    "eq": "yes"
                  },
                  "requireDecimal": false,
                  "delimiter": false,
                  "lockKey": true
                },
                {
                  "input": true,
                  "tableView": true,
                  "inputType": "number",
                  "label": "What is the minimum duration as a percentage that this offering will be delivered online?",
                  "key": "minimumOnlineDuration",
                  "logic": [
                    {
                      "name": "Mandatory for BC Private",
                      "trigger": {
                        "type": "simple",
                        "simple": {
                          "show": true,
                          "when": "isBCPrivate",
                          "eq": "true"
                        }
                      },
                      "actions": [
                        {
                          "name": "Set Mandatory",
                          "type": "property",
                          "property": {
                            "label": "Required",
                            "value": "validate.required",
                            "type": "boolean"
                          },
                          "state": true
                        }
                      ]
                    }
                  ],
                  "validate": {
                    "min": 1,
                    "max": 99
                  },
                  "type": "number",
                  "conditional": {
                    "show": "true",
                    "when": "isOnlineDurationSameAlways",
                    "eq": "no"
                  },
                  "lockKey": true
                },
                {
                  "input": true,
                  "tableView": true,
                  "inputType": "number",
                  "label": "What is the maximum duration as a percentage that this offering will be delivered online?",
                  "key": "maximumOnlineDuration",
                  "logic": [
                    {
                      "name": "Mandatory for BC Private",
                      "trigger": {
                        "type": "simple",
                        "simple": {
                          "show": true,
                          "when": "isBCPrivate",
                          "eq": "true"
                        }
                      },
                      "actions": [
                        {
                          "name": "Set Mandatory",
                          "type": "property",
                          "property": {
                            "label": "Required",
                            "value": "validate.required",
                            "type": "boolean"
                          },
                          "state": true
                        }
                      ]
                    }
                  ],
                  "validate": {
                    "min": 1,
                    "max": 99,
                    "custom": "valid = input > data.minimumOnlineDuration ? true : \"The maximum percentage must be greater than the minimum percentage\""
                  },
                  "type": "number",
                  "conditional": {
                    "show": "true",
                    "when": "isOnlineDurationSameAlways",
                    "eq": "no"
                  },
                  "lockKey": true
                }
              ],
              "type": "panel",
              "hideLabel": true,
              "customConditional": "/**\n * Allow the online delivery option inputs only for\n * BC Public and BC Private Institutions\n * when the delivery type is either online or blended.\n */\nshow = ['online','blended'].includes(data.offeringDelivered) && (data.isBCPublic || data.isBCPrivate);",
              "label": "Panel"
            },
            {
              "label": "Does this contain a work-integrated learning component?",
              "optionsLabelPosition": "right",
              "inline": false,
              "tableView": false,
              "values": [
                {
                  "label": "Yes",
                  "value": "yes",
                  "shortcut": ""
                },
                {
                  "label": "No",
                  "value": "no",
                  "shortcut": ""
                }
              ],
              "validate": {
                "required": true,
                "onlyAvailableItems": true
              },
              "key": "hasOfferingWILComponent",
              "tags": [
                "execute-validation"
              ],
              "attributes": {
                "data-cy": "hasOfferingWILComponent"
              },
              "type": "radio",
              "input": true
            },
            {
              "label": "HTML",
              "tag": "p",
              "className": "alert alert-warning fa fa-exclamation-triangle w-100",
              "attrs": [
                {
                  "attr": "",
                  "value": ""
                }
              ],
              "content": "<strong class=\"ml-2\">This study period canâ€™t contain a work-integrated component</strong>\n<br>\n<span>Your program must be approved with a work-integrated component first.</span>",
              "refreshOnChange": false,
              "customClass": "banner-warning",
              "key": "programOfferingWILMismatch",
              "customConditional": "show = data.validationWarnings.indexOf(component.key) !== -1;",
              "type": "htmlelement",
              "input": false,
              "tableView": false
            },
            {
              "collapsible": false,
              "hideLabel": true,
              "key": "panel1",
              "customConditional": "show =  data.hasOfferingWILComponent ===\"yes\"",
              "type": "panel",
              "label": "Panel",
              "input": false,
              "tableView": false,
              "components": [
                {
                  "label": "What work-integrated learning type is contained within this study period?",
                  "tableView": true,
                  "validate": {
                    "required": true,
                    "maxLength": 50
                  },
                  "key": "offeringWILComponentType",
                  "type": "textfield",
                  "input": true
                }
              ]
            },
            {
              "title": "Study dates panel",
              "customClass": "formio-panel-unset",
              "collapsible": false,
              "hideLabel": true,
              "key": "studyDatesPanel",
              "type": "panel",
              "label": "Panel",
              "input": false,
              "tableView": false,
              "components": [
                {
                  "label": "HTML",
                  "tag": "h2",
                  "className": "category-header-large primary-color",
                  "attrs": [
                    {
                      "attr": "",
                      "value": ""
                    }
                  ],
                  "content": "Study dates",
                  "refreshOnChange": false,
                  "key": "html1",
                  "type": "htmlelement",
                  "input": false,
                  "tableView": false
                },
                {
                  "collapsible": false,
                  "hideLabel": true,
                  "key": "panel3",
                  "type": "panel",
                  "label": "Panel",
                  "input": false,
                  "tableView": false,
                  "components": [
                    {
                      "label": "Columns",
                      "columns": [
                        {
                          "components": [
                            {
                              "label": "Start date",
                              "placeholder": "Select date",
                              "widget": {
                                "type": "calendar",
                                "allowInput": true,
                                "clickOpens": true,
                                "enableDate": true,
                                "enableTime": false,
                                "mode": "single",
                                "noCalendar": false,
                                "format": "yyyy-MM-dd",
                                "dateFormat": "yyyy-MM-dd",
                                "useLocaleSettings": false,
                                "hourIncrement": 1,
                                "minuteIncrement": 5,
                                "time_24hr": false,
                                "saveAs": "text",
                                "locale": "en",
                                "displayInTimezone": "viewer"
                              },
                              "tableView": true,
                              "validate": {
                                "required": true
                              },
                              "key": "studyStartDate",
                              "tags": [
                                "execute-validation",
                                "execute-calculation"
                              ],
                              "attributes": {
                                "data-cy": "studyStartDate"
                              },
                              "type": "textfield",
                              "input": true
                            }
                          ],
                          "width": 6,
                          "offset": 0,
                          "push": 0,
                          "pull": 0,
                          "size": "md",
                          "currentWidth": 6
                        },
                        {
                          "components": [
                            {
                              "label": "End date",
                              "placeholder": "Select date",
                              "widget": {
                                "type": "calendar",
                                "allowInput": true,
                                "clickOpens": true,
                                "enableDate": true,
                                "enableTime": false,
                                "mode": "single",
                                "noCalendar": false,
                                "format": "yyyy-MM-dd",
                                "dateFormat": "yyyy-MM-dd",
                                "useLocaleSettings": false,
                                "hourIncrement": 1,
                                "minuteIncrement": 5,
                                "time_24hr": false,
                                "saveAs": "text",
                                "locale": "en",
                                "displayInTimezone": "viewer"
                              },
                              "tableView": true,
                              "validate": {
                                "required": true,
                                "custom": "valid=(data.studyStartDate) ? (data.studyStartDate<data.studyEndDate) ? true : 'End Date must be after Study Start Date' : 'Please provide Study Start date';"
                              },
                              "key": "studyEndDate",
                              "tags": [
                                "execute-validation",
                                "execute-calculation"
                              ],
                              "attributes": {
                                "data-cy": "studyEndDate"
                              },
                              "type": "textfield",
                              "input": true
                            }
                          ],
                          "width": 6,
                          "offset": 0,
                          "push": 0,
                          "pull": 0,
                          "size": "md",
                          "currentWidth": 6
                        }
                      ],
                      "hideOnChildrenHidden": false,
                      "key": "columns",
                      "type": "columns",
                      "input": false,
                      "tableView": false
                    }
                  ]
                },
                {
                  "label": "Invalid study dates popup",
                  "tag": "p",
                  "className": "alert alert-warning fa fa-exclamation-triangle w-100",
                  "attrs": [
                    {
                      "attr": "",
                      "value": ""
                    }
                  ],
                  "content": "<strong class=\"ml-2\">This study period is ineligible for StudentAid BC funding</strong>\n<br>\n<span>The dates you have entered will create an offering with more than {{data.studyPeriodMaxDays}} days.</span>",
                  "refreshOnChange": true,
                  "customClass": "banner-warning ",
                  "key": "invalidStudyDatesPeriodLength",
                  "customConditional": "show = data.validationWarnings.indexOf(component.key) !== -1;",
                  "type": "htmlelement",
                  "input": false,
                  "tableView": false,
                  "lockKey": true
                }
              ]
            },
            {
              "title": "study break panel",
              "customClass": "formio-panel-unset",
              "collapsible": false,
              "hideLabel": true,
              "key": "studyBreakPanel",
              "type": "panel",
              "label": "Panel",
              "input": false,
              "tableView": false,
              "components": [
                {
                  "label": "HTML",
                  "tag": "h2",
                  "className": "category-header-large primary-color",
                  "attrs": [
                    {
                      "attr": "",
                      "value": ""
                    }
                  ],
                  "content": "Study breaks",
                  "refreshOnChange": false,
                  "key": "html2",
                  "type": "htmlelement",
                  "input": false,
                  "tableView": false,
                  "isNew": false
                },
                {
                  "label": "HTML",
                  "attrs": [
                    {
                      "attr": "",
                      "value": ""
                    }
                  ],
                  "content": "Identify schedule breaks for the study period offering:\n<ul>\n  <li>\n    Study breaks of five or fewer consecutive calendar days that would normally be instructional days do not count towards study breaks.\n  </li>\n  <li>Study breaks cannot exceed three weeks, or 21 consecutive days. Excess break days will be deducted from overall funded weeks.</li>\n  <li>\n    Breaks in study may not exceed 10% (individually or cumulatively) of the study period offering length. Excess break days will be deducted from overall funded weeks.\n  </li>\n</ul>",
                  "refreshOnChange": false,
                  "customClass": "align-bullets mt-n2",
                  "key": "html3",
                  "type": "htmlelement",
                  "input": false,
                  "tableView": false,
                  "hideLabel": true
                },
                {
                  "label": "No study breaks",
                  "tableView": false,
                  "defaultValue": false,
                  "redrawOn": "data",
                  "key": "lacksStudyBreaks",
                  "tags": [
                    "execute-validation",
                    "execute-calculation"
                  ],
                  "type": "checkbox",
                  "input": true
                },
                {
                  "label": "Break dates",
                  "reorder": false,
                  "addAnother": "Add a study break",
                  "addAnotherPosition": "bottom",
                  "layoutFixed": false,
                  "enableRowGroups": false,
                  "initEmpty": false,
                  "tableView": false,
                  "defaultValue": [
                    {
                      "breakStartDate": "",
                      "breakEndDate": "",
                      "breakDays": 0,
                      "eligibleBreakDays": 0,
                      "ineligibleBreakDays": 0
                    }
                  ],
                  "validate": {
                    "required": true,
                    "maxLength": "5"
                  },
                  "key": "studyBreaks",
                  "tags": [
                    "execute-validation",
                    "execute-calculation"
                  ],
                  "conditional": {
                    "show": true,
                    "when": "lacksStudyBreaks",
                    "eq": "false"
                  },
                  "type": "datagrid",
                  "input": true,
                  "components": [
                    {
                      "label": "Break start date",
                      "placeholder": "Select date",
                      "widget": {
                        "type": "calendar",
                        "allowInput": true,
                        "clickOpens": true,
                        "enableDate": true,
                        "enableTime": false,
                        "mode": "single",
                        "noCalendar": false,
                        "format": "yyyy-MM-dd",
                        "dateFormat": "yyyy-MM-dd",
                        "useLocaleSettings": false,
                        "hourIncrement": 1,
                        "minuteIncrement": 5,
                        "time_24hr": false,
                        "saveAs": "text",
                        "locale": "en",
                        "displayInTimezone": "viewer"
                      },
                      "tableView": true,
                      "validate": {
                        "required": true,
                        "custom": "// Validation logic.\r\nif (input) {\r\n  if (data.studyStartDate && data.studyEndDate) {\r\n    if (input >= data.studyStartDate && input <= data.studyEndDate) {\r\n      // study break overlapping detecting logic.\r\n      if (data.studyBreaksOverlappingDetection) {\r\n        valid = data.studyBreaksOverlappingDetection;\r\n      } else {\r\n        valid = true;\r\n      }\r\n    } else {\r\n      valid =\r\n        \"Break Start date should be in between study start date and study end date.\";\r\n    }\r\n  } else {\r\n    valid = \"Study start date or study end date can't be empty.\";\r\n  }\r\n}\r\n"
                      },
                      "key": "breakStartDate",
                      "tags": [
                        "execute-validation",
                        "execute-calculation"
                      ],
                      "attributes": {
                        "data-cy": "breakStartDate"
                      },
                      "type": "textfield",
                      "input": true,
                      "inDataGrid": true
                    },
                    {
                      "label": "Break end date",
                      "placeholder": "Select date",
                      "widget": {
                        "type": "calendar",
                        "allowInput": true,
                        "clickOpens": true,
                        "enableDate": true,
                        "enableTime": false,
                        "mode": "single",
                        "noCalendar": false,
                        "format": "yyyy-MM-dd",
                        "dateFormat": "yyyy-MM-dd",
                        "useLocaleSettings": false,
                        "hourIncrement": 1,
                        "minuteIncrement": 5,
                        "time_24hr": false,
                        "saveAs": "text",
                        "locale": "en",
                        "displayInTimezone": "viewer"
                      },
                      "tableView": true,
                      "validate": {
                        "required": true,
                        "custom": "// Validation logic.\r\nif (input) {\r\n  if (data.studyStartDate && data.studyEndDate) {\r\n    if (input >= data.studyStartDate && input <= data.studyEndDate) {\r\n      if (row.breakStartDate) {\r\n        if (row.breakStartDate < input) {\r\n          // study break overlapping detecting logic.\r\n          if (data.studyBreaksOverlappingDetection) {\r\n            valid = data.studyBreaksOverlappingDetection;\r\n          } else {\r\n            valid = true;\r\n          }\r\n        } else {\r\n          valid = \"Break End Date must be after Break Start Date\";\r\n        }\r\n      } else {\r\n        valid = \"Please provide Break Start date\";\r\n      }\r\n    } else {\r\n      valid =\r\n        \"Break End date should be in between study start date and study end date.\";\r\n    }\r\n  } else {\r\n    valid = \"Study start date or study end date can't be empty.\";\r\n  }\r\n}\r\n"
                      },
                      "key": "breakEndDate",
                      "tags": [
                        "execute-validation",
                        "execute-calculation"
                      ],
                      "attributes": {
                        "data-cy": "breakEndDate"
                      },
                      "type": "textfield",
                      "input": true,
                      "inDataGrid": true
                    },
                    {
                      "label": "Total break days",
                      "mask": false,
                      "disabled": true,
                      "tableView": false,
                      "delimiter": false,
                      "requireDecimal": false,
                      "inputFormat": "plain",
                      "truncateMultipleSpaces": false,
                      "calculateValue": "value = 0;\r\nif (row.breakStartDate && row.breakEndDate) {\r\n  const diffDays = moment(row.breakEndDate, \"YYYY-MM-DD\").diff(\r\n    moment(row.breakStartDate, \"YYYY-MM-DD\"),\r\n    \"days\"\r\n  ) + 1 ;\r\n  value = Math.max(diffDays, 0);\r\n}\r\n",
                      "calculateServer": true,
                      "validate": {
                        "required": true,
                        "min": 6,
                        "customMessage": "Breaks must be a minimum of 6 days."
                      },
                      "errorLabel": " ",
                      "key": "breakDays",
                      "type": "number",
                      "input": true,
                      "inDataGrid": true,
                      "inputType": "number"
                    },
                    {
                      "label": "Total eligible break days",
                      "mask": false,
                      "disabled": true,
                      "tableView": false,
                      "delimiter": false,
                      "requireDecimal": false,
                      "inputFormat": "plain",
                      "truncateMultipleSpaces": false,
                      "calculateValue": "// Maximum of 21 days per break are eligible.\r\n// Any days over 21 consecutive days must be unfunded\r\nvalue = row.breakDays && (row.breakDays > 21) ? 21 : row.breakDays;",
                      "calculateServer": true,
                      "validate": {
                        "required": true
                      },
                      "key": "eligibleBreakDays",
                      "type": "number",
                      "input": true,
                      "inDataGrid": true,
                      "inputType": "number",
                      "lockKey": true
                    },
                    {
                      "label": "Total ineligible break days",
                      "mask": false,
                      "disabled": true,
                      "tableView": false,
                      "delimiter": false,
                      "requireDecimal": false,
                      "inputFormat": "plain",
                      "truncateMultipleSpaces": false,
                      "calculateValue": "// Breaks days (each) over 21 consecutive days must be unfunded.\r\nvalue = row.breakDays - row.eligibleBreakDays;",
                      "calculateServer": true,
                      "validate": {
                        "required": true
                      },
                      "key": "ineligibleBreakDays",
                      "type": "number",
                      "input": true,
                      "inDataGrid": true,
                      "inputType": "number"
                    }
                  ]
                },
                {
                  "label": "Study Breaks Overlapping Detection",
                  "calculateValue": "value = false;\r\nconst dateTimes = data.studyBreaks;\r\ndateTimes?.forEach((time, i) => {\r\n  let st1 = time.breakStartDate;\r\n  let et1 = time.breakEndDate;\r\n\r\n  dateTimes?.forEach((time2, j) => {\r\n    if (i != j) {\r\n      let st2 = time2.breakStartDate;\r\n      let et2 = time2.breakEndDate;\r\n\r\n      if (\r\n        (st1 >= st2 && st1 <= et2) ||\r\n        (et1 >= st2 && et1 <= et2) ||\r\n        (st2 >= st1 && st2 <= et1) ||\r\n        (et2 >= st1 && et2 <= et1)\r\n      ) {\r\n        value = \"Overlapping study breaks detected.\";\r\n      }\r\n    }\r\n  });\r\n});\r\n",
                  "key": "studyBreaksOverlappingDetection",
                  "type": "hidden",
                  "input": true,
                  "tableView": false
                }
              ]
            },
            {
              "label": "Study Period Breakdown",
              "tag": "h2",
              "className": "category-header-large primary-color",
              "attrs": [
                {
                  "attr": "",
                  "value": ""
                }
              ],
              "content": "Study Period Breakdown",
              "refreshOnChange": false,
              "key": "html9",
              "type": "htmlelement",
              "input": false,
              "tableView": false
            },
            {
              "collapsible": false,
              "hideLabel": true,
              "key": "panel7",
              "type": "panel",
              "label": "Panel",
              "input": false,
              "tableView": false,
              "components": [
                {
                  "label": "Study Period Breakdown Container",
                  "tableView": false,
                  "key": "studyPeriodBreakdown",
                  "type": "container",
                  "input": true,
                  "components": [
                    {
                      "label": "Columns",
                      "columns": [
                        {
                          "components": [
                            {
                              "input": true,
                              "tableView": true,
                              "inputType": "number",
                              "label": "Total days",
                              "key": "totalDays",
                              "persistent": false,
                              "type": "number",
                              "disabled": true,
                              "lockKey": true
                            }
                          ],
                          "width": 6,
                          "offset": 0,
                          "push": 0,
                          "pull": 0,
                          "size": "md",
                          "currentWidth": 6
                        },
                        {
                          "components": [
                            {
                              "input": true,
                              "tableView": true,
                              "inputType": "number",
                              "label": "Total funded weeks",
                              "key": "totalFundedWeeks",
                              "persistent": false,
                              "type": "number",
                              "lockKey": true,
                              "disabled": true
                            }
                          ],
                          "width": 6,
                          "offset": 0,
                          "push": 0,
                          "pull": 0,
                          "size": "md",
                          "currentWidth": 6
                        },
                        {
                          "components": [
                            {
                              "input": true,
                              "tableView": true,
                              "inputType": "number",
                              "label": "Funded study period days",
                              "key": "fundedStudyPeriodDays",
                              "persistent": false,
                              "type": "number",
                              "disabled": true,
                              "lockKey": true
                            }
                          ],
                          "size": "md",
                          "width": 6,
                          "offset": 0,
                          "push": 0,
                          "pull": 0,
                          "currentWidth": 6
                        },
                        {
                          "components": [
                            {
                              "input": true,
                              "tableView": true,
                              "inputType": "number",
                              "label": "Unfunded study period days",
                              "key": "unfundedStudyPeriodDays",
                              "persistent": false,
                              "type": "number",
                              "disabled": true,
                              "lockKey": true
                            }
                          ],
                          "size": "md",
                          "width": 6,
                          "offset": 0,
                          "push": 0,
                          "pull": 0,
                          "currentWidth": 6
                        }
                      ],
                      "key": "columns5",
                      "type": "columns",
                      "input": false,
                      "tableView": false
                    }
                  ]
                },
                {
                  "label": "Invalid funded study period length popup",
                  "tag": "p",
                  "className": "alert alert-warning fa fa-exclamation-triangle w-100",
                  "attrs": [
                    {
                      "attr": "",
                      "value": ""
                    }
                  ],
                  "content": "<strong class=\"ml-2\">This study period is ineligible for StudentAid BC funding</strong>\n<br>\n<span>{{data.offeringIntensityText}} offerings must be at least {{data.studyPeriodMinWeeks}} weeks of study or longer to be eligible. Any shorter offerings can be submitted but will require SABC review.</span>",
                  "refreshOnChange": true,
                  "customClass": "banner-warning ",
                  "key": "invalidFundedStudyPeriodLength",
                  "customConditional": "show = data.validationWarnings.indexOf(component.key) !== -1;",
                  "type": "htmlelement",
                  "input": false,
                  "tableView": false,
                  "lockKey": true,
                  "hideLabel": true
                }
              ]
            },
            {
              "label": "HTML",
              "tag": "p",
              "className": "alert alert-info fa fa-info-circle w-100",
              "attrs": [
                {
                  "attr": "",
                  "value": ""
                }
              ],
              "content": "<strong class=\"ml-2\">This study break exceeds the 21 consecutive day threshold as outlined in StudentAid BC policy</strong>\n<br>\n<span>Excess break will be deducted from total funded study period weeks.</span>",
              "refreshOnChange": true,
              "customClass": "banner-info",
              "key": "invalidStudyBreakAmountOfDays",
              "customConditional": "show = data.validationInfos.indexOf(component.key) !== -1;",
              "type": "htmlelement",
              "input": false,
              "tableView": false
            },
            {
              "label": "HTML",
              "tag": "p",
              "className": "alert alert-info fa fa-info-circle w-100",
              "attrs": [
                {
                  "attr": "",
                  "value": ""
                }
              ],
              "content": "<strong class=\"ml-2\">The combined study breaks exceed the 10% threshold as outlined in StudentAid BC policy</strong>\n<br>\n<span>Excess break will be deducted from total funded study period weeks.</span>",
              "refreshOnChange": true,
              "customClass": "banner-info",
              "key": "invalidStudyBreaksCombinedThresholdPercentage",
              "customConditional": "show = data.validationInfos.indexOf(component.key) !== -1;",
              "type": "htmlelement",
              "input": false,
              "tableView": false
            },
            {
              "label": "HTML",
              "tag": "h2",
              "className": "category-header-large primary-color",
              "attrs": [
                {
                  "attr": "",
                  "value": ""
                }
              ],
              "content": "Study costs",
              "refreshOnChange": false,
              "key": "html4",
              "type": "htmlelement",
              "input": false,
              "tableView": false
            },
            {
              "label": "HTML",
              "attrs": [
                {
                  "attr": "",
                  "value": ""
                }
              ],
              "content": "Please add the costs for each section (use 0 if there are no costs).\n<br>\nThese costs must comply with the maximum allowable costs according to the SABC policy manual.\n\n<br/>\nNo amounts beyond the maximum allowable limits will be factored into a student's need assessment.",
              "refreshOnChange": false,
              "customClass": "mt-n2",
              "key": "html5",
              "type": "htmlelement",
              "input": false,
              "tableView": false,
              "tag": "p",
              "hideLabel": true
            },
            {
              "collapsible": false,
              "hideLabel": true,
              "key": "panel5",
              "type": "panel",
              "label": "Panel",
              "input": false,
              "tableView": false,
              "components": [
                {
                  "label": "Columns",
                  "columns": [
                    {
                      "components": [
                        {
                          "label": "Tuition",
                          "prefix": "$",
                          "mask": false,
                          "tableView": false,
                          "delimiter": true,
                          "decimalLimit": 0,
                          "requireDecimal": false,
                          "inputFormat": "plain",
                          "truncateMultipleSpaces": false,
                          "validate": {
                            "required": true
                          },
                          "key": "actualTuitionCosts",
                          "attributes": {
                            "data-cy": "actualTuitionCosts"
                          },
                          "type": "number",
                          "spellcheck": true,
                          "input": true,
                          "hideOnChildrenHidden": false,
                          "inputType": "number",
                          "tags": [
                            "execute-validation"
                          ]
                        }
                      ],
                      "width": 6,
                      "offset": 0,
                      "push": 0,
                      "pull": 0,
                      "size": "md",
                      "currentWidth": 6
                    },
                    {
                      "components": [
                        {
                          "label": "Books and Supplies",
                          "prefix": "$",
                          "mask": false,
                          "tableView": false,
                          "delimiter": true,
                          "decimalLimit": 0,
                          "requireDecimal": false,
                          "inputFormat": "plain",
                          "truncateMultipleSpaces": false,
                          "validate": {
                            "required": true
                          },
                          "key": "programRelatedCosts",
                          "attributes": {
                            "data-cy": "programRelatedCosts"
                          },
                          "type": "number",
                          "spellcheck": true,
                          "input": true,
                          "hideOnChildrenHidden": false,
                          "inputType": "number",
                          "tags": [
                            "execute-validation"
                          ]
                        }
                      ],
                      "width": 6,
                      "offset": 0,
                      "push": 0,
                      "pull": 0,
                      "size": "md",
                      "currentWidth": 6
                    }
                  ],
                  "key": "columns1",
                  "type": "columns",
                  "input": false,
                  "tableView": false
                },
                {
                  "input": false,
                  "key": "columns2",
                  "tableView": false,
                  "label": "Columns",
                  "type": "columns",
                  "columns": [
                    {
                      "components": [
                        {
                          "label": "Mandatory fees",
                          "prefix": "$",
                          "mask": false,
                          "tableView": false,
                          "delimiter": true,
                          "decimalLimit": 0,
                          "requireDecimal": false,
                          "inputFormat": "plain",
                          "truncateMultipleSpaces": false,
                          "validate": {
                            "required": true
                          },
                          "key": "mandatoryFees",
                          "attributes": {
                            "data-cy": "mandatoryFees"
                          },
                          "type": "number",
                          "spellcheck": true,
                          "input": true,
                          "hideOnChildrenHidden": false,
                          "inputType": "number",
                          "tags": [
                            "execute-validation"
                          ]
                        }
                      ],
                      "width": 6,
                      "offset": 0,
                      "push": 0,
                      "pull": 0,
                      "size": "md",
                      "currentWidth": 6
                    },
                    {
                      "components": [
                        {
                          "label": "Exceptional Costs",
                          "prefix": "$",
                          "mask": false,
                          "tableView": false,
                          "delimiter": true,
                          "decimalLimit": 0,
                          "requireDecimal": false,
                          "inputFormat": "plain",
                          "truncateMultipleSpaces": false,
                          "validate": {
                            "required": true
                          },
                          "key": "exceptionalExpenses",
                          "attributes": {
                            "data-cy": "exceptionalExpenses"
                          },
                          "type": "number",
                          "spellcheck": true,
                          "input": true,
                          "hideOnChildrenHidden": false,
                          "inputType": "number",
                          "tags": [
                            "execute-validation"
                          ]
                        }
                      ],
                      "width": 6,
                      "offset": 0,
                      "push": 0,
                      "pull": 0,
                      "size": "md",
                      "currentWidth": 6
                    }
                  ]
                },
                {
                  "key": "offeringCostExceedMaximum",
                  "label": "HTML",
                  "input": false,
                  "tag": "p",
                  "attrs": [
                    {
                      "value": "",
                      "attr": ""
                    }
                  ],
                  "className": "alert alert-warning fa fa-exclamation-triangle w-100",
                  "content": "<strong class=\"ml-2\">The cost amounts reported for this offering may exceed eligible amounts</strong>\n<br>\n<span>The cost amounts reported for this offering may exceed eligible amounts. This offering can be submitted but will require StudentAid BC approval.</span>",
                  "type": "htmlelement",
                  "customClass": "banner-warning",
                  "lockKey": true,
                  "customConditional": "show = data.validationWarnings.indexOf(component.key) !== -1;",
                  "tableView": false
                }
              ]
            },
            {
              "label": "HTML",
              "tag": "h2",
              "className": "category-header-large primary-color",
              "attrs": [
                {
                  "attr": "",
                  "value": ""
                }
              ],
              "content": "Study period availability",
              "refreshOnChange": false,
              "key": "studyPeriodAvailability",
              "type": "htmlelement",
              "input": false,
              "tableView": false
            },
            {
              "title": "Offering type panel",
              "collapsible": false,
              "hideLabel": true,
              "key": "offeringTypePanel",
              "type": "panel",
              "label": "Panel",
              "input": false,
              "tableView": false,
              "components": [
                {
                  "label": "Do you want to add this study period for all students to select?",
                  "optionsLabelPosition": "right",
                  "inline": false,
                  "tableView": false,
                  "values": [
                    {
                      "label": "Yes, this offering is for all students",
                      "value": "Public",
                      "shortcut": ""
                    },
                    {
                      "label": "No, this offering is for a specific student",
                      "value": "Private",
                      "shortcut": ""
                    }
                  ],
                  "validate": {
                    "required": true,
                    "onlyAvailableItems": true
                  },
                  "key": "offeringType",
                  "attributes": {
                    "data-cy": "offeringType"
                  },
                  "type": "radio",
                  "input": true
                }
              ]
            }
          ]
        },
        {
          "label": "Declaration",
          "tag": "h2",
          "className": "category-header-large primary-color",
          "attrs": [
            {
              "attr": "",
              "value": ""
            }
          ],
          "content": "Declaration",
          "refreshOnChange": false,
          "key": "declaration",
          "type": "htmlelement",
          "input": false,
          "tableView": false
        },
        {
          "collapsible": false,
          "hideLabel": true,
          "key": "panel2",
          "type": "panel",
          "label": "Panel",
          "input": false,
          "tableView": false,
          "components": [
            {
              "label": "HTML",
              "attrs": [
                {
                  "attr": "",
                  "value": ""
                }
              ],
              "content": "All information is subject to verification and auditing.",
              "refreshOnChange": false,
              "customClass": "category-header-medium-small primary-color",
              "key": "html8",
              "type": "htmlelement",
              "input": false,
              "tableView": false,
              "tag": "p"
            },
            {
              "label": "I confirm this study period offering meets the policies outlined in the StudentAid BC policy manual.",
              "tableView": false,
              "defaultValue": false,
              "validate": {
                "required": true
              },
              "key": "offeringDeclaration",
              "attributes": {
                "data-cy": "offeringDeclaration"
              },
              "type": "checkbox",
              "input": true
            }
          ]
        }
      ]
    },
    {
      "label": "Modes (editable | readonly | assessment-data-readonly)",
      "key": "mode",
      "type": "hidden",
      "input": true,
      "tableView": false
    },
    {
      "label": "Array of offerings warnings calculated on the server and used to display warnings banners",
      "persistent": "client-only",
      "key": "validationWarnings",
      "type": "hidden",
      "input": true,
      "tableView": false
    },
    {
      "label": "Array of offerings information (banners) calculated on the server and used to display warnings banners",
      "persistent": "client-only",
      "key": "validationInfos",
      "type": "hidden",
      "input": true,
      "tableView": false
    },
    {
      "label": "applicationId",
      "persistent": "client-only",
      "key": "applicationId",
      "type": "hidden",
      "input": true,
      "tableView": false
    },
    {
      "label": "applicationStatus",
      "persistent": "client-only",
      "key": "applicationStatus",
      "type": "hidden",
      "input": true,
      "tableView": false
    },
    {
      "input": true,
      "tableView": true,
      "key": "studyPeriodMinDays",
      "label": "Study period minimum days",
      "type": "hidden",
      "lockKey": true,
      "calculateValue": "value = data.offeringIntensity === 'Full Time' ? 84 : 42;"
    },
    {
      "input": true,
      "tableView": true,
      "key": "studyPeriodMaxDays",
      "label": "Study period maximum days",
      "type": "hidden",
      "defaultValue": "365",
      "lockKey": true
    },
    {
      "input": true,
      "tableView": true,
      "key": "studyPeriodMinWeeks",
      "label": "Study period minimum weeks",
      "type": "hidden",
      "lockKey": true,
      "calculateValue": "value = data.offeringIntensity === 'Full Time' ? 12 : 6;"
    },
    {
      "input": true,
      "tableView": true,
      "key": "offeringIntensityText",
      "label": "Offering intensity text",
      "type": "hidden",
      "lockKey": true,
      "calculateValue": "value = data.offeringIntensity === 'Full Time' ? 'Full-time' : 'Part-time';"
    },
    {
      "input": true,
      "tableView": false,
      "key": "isBCPublic",
      "label": "Is BC Public",
      "persistent": false,
      "type": "hidden",
      "lockKey": true
    },
    {
      "input": true,
      "tableView": false,
      "key": "isBCPrivate",
      "label": "Is BC Private",
      "persistent": false,
      "type": "hidden",
      "lockKey": true
    }
  ]
}